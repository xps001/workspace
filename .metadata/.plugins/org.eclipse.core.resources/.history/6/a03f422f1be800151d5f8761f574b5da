package com.test3;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;
import java.util.*;

public class Demo1_3 extends JFrame{
	JPanel jp1,jp2=null;
	JTextField jtf=null;
	JButton jb1,jb2,jb3,jb4=null;
	JLabel jl1=null;
	JTable jt1=null;
	JScrollPane jsp=null;
    Vector rowData,columnNames;
	JTable jt2=null;
    PreparedStatement ps=null;
    Connection ct=null;
    ResultSet rs=null;
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Demo1_3 demo1_3=new Demo1_3();
	}
public Demo1_3(){
	jp1=new JPanel();
	jtf=new JTextField(10);
	jb1=new JButton("查询");
	jl1=new JLabel("请输入名字");
	jp1.add(jtf);
	jp1.add(jb1);
	jp1.add(jl1);
	
	jp2=new JPanel();
	jb2=new JButton("添加");
	jb3=new JButton("修改");
	jb4=new JButton("删除");
	jp2.add(jb2);
	jp2.add(jb3);
	jp2.add(jb4);

	rowData=new Vector<>();
	columnNames=new Vector<>();
	columnNames.add("学号");
	columnNames.add("名字");
	columnNames.add("性别");
	columnNames.add("年龄");
	columnNames.add("籍贯");
	columnNames.add("系别");
try {
	Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");    
	ct=DriverManager.getConnection
			("jdbc:sqlserver://127.0.0.1:1433;DatabaseName=students","sa","xpslovedkl");
	ps=ct.prepareStatement("select * from stu");
	rs=ps.executeQuery();
	while (rs.next()) {
		Vector hang=new Vector();
		hang.add(rs.getString(1));
		hang.add(rs.getString(2));
		hang.add(rs.getString(3));
		hang.add(rs.getInt(4));
		hang.add(rs.getString(5));
		hang.add(rs.getString(6));

		rowData.add(hang);
	}
	jt2=new JTable(rowData,columnNames);
	jsp=new JScrollPane(jt2);
} catch (Exception e) {
	// TODO Auto-generated catch block
	e.printStackTrace(); 
}finally {
	try {
		if(rs!=null){
			rs.close();			
		}
		if(ps!=null){
			ps.close();	
		}
		if(ct!=null){
			ct.close();		
		}
	} catch (SQLException e) {
		// TODO Auto-generated catch block
		e.printStackTrace();
	}
	
}	
    this.add(jsp);
	this.add(jp1,"North");
	this.add(jp2,"South");
	this.setSize(400,300);
	this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	this.setVisible(true);		
}
}
